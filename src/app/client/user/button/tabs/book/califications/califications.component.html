<!-- califications.component.html -->
<div class="califications-container bg-theme p-3 p-md-4">
  <!-- SecciÃ³n del podio de los mejores valorados -->
  <section class="top-books mb-5">
    <h2 class="section-title position-relative d-inline-block mb-4 pb-2 text-theme-text">Libros Mejor Valorados</h2>
    
    <div class="podium-container d-flex justify-content-center align-items-end gap-4 mt-4 p-3 position-relative">
      <!-- Segundo lugar -->
      <div class="podium-item second-place transition-y" *ngIf="topLibros.length >= 2">

        <div class="book-card gradient-card rounded-4 p-3 shadow w-100">
          <div class="book-cover rounded-3 shadow overflow-hidden mx-auto mb-3">
            <img [src]="topLibros[1].imagen" [alt]="topLibros[1].titulo" class="w-100 h-100 object-fit-cover img-hover">
          </div>
          <div class="book-info">
            <h3 class="text-nowrap overflow-hidden text-truncate fw-semibold fs-6 mb-2 text-theme-text">{{ topLibros[1].titulo }}</h3>
            <div class="rating d-flex align-items-center">
              <span class="rating-number fw-bold  me-2">{{ topLibros[1].valoracion }}</span>
              <div class="stars d-flex">
                <i class="star filled  me-1" *ngFor="let star of getEstrellas(topLibros[1].valoracion)">â˜…</i>
                <i class="star empty text-theme me-1" *ngFor="let star of getEstrellasVacias(topLibros[1].valoracion)">â˜†</i>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Primer lugar (mÃ¡s alto) -->
      <div class="podium-item first-place transition-y mb-4 z-3" *ngIf="topLibros.length >= 1">

        <div class="book-card gradient-card rounded-4 p-3 shadow  scale-110 position-relative">
          <div class="crown-icon position-absolute end-n10 top-n10 fs-2 rotate-30">ðŸ‘‘</div>
          <div class="book-cover rounded-3 shadow overflow-hidden mx-auto mb-3">
            <img [src]="topLibros[0].imagen" [alt]="topLibros[0].titulo" class="w-100 h-100 object-fit-cover img-hover">
          </div>
          <div class="book-info">
            <h3 class="text-nowrap overflow-hidden text-truncate fw-semibold fs-6 mb-2 text-theme-text">{{ topLibros[0].titulo }}</h3>
            <div class="rating d-flex align-items-center">
              <span class="rating-number fw-bold me-2">{{ topLibros[0].valoracion }}</span>
              <div class="stars d-flex">
                <i class="star filled  me-1" *ngFor="let star of getEstrellas(topLibros[0].valoracion)">â˜…</i>
                <i class="star empty text-theme me-1" *ngFor="let star of getEstrellasVacias(topLibros[0].valoracion)">â˜†</i>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tercer lugar -->
      <div class="podium-item third-place transition-y z-1" *ngIf="topLibros.length >= 3">

        <div class="book-card gradient-card rounded-4 p-3 shadow w-100">
          <div class="book-cover rounded-3 shadow overflow-hidden mx-auto mb-3">
            <img [src]="topLibros[2].imagen" [alt]="topLibros[2].titulo" class="w-100 h-100 object-fit-cover img-hover">
          </div>
          <div class="book-info">
            <h3 class="text-nowrap overflow-hidden text-truncate fw-semibold fs-6 mb-2 text-theme-text">{{ topLibros[2].titulo }}</h3>
            <div class="rating d-flex align-items-center">
              <span class="rating-number fw-bold  me-2">{{ topLibros[2].valoracion }}</span>
              <div class="stars d-flex">
                <i class="star filled  me-1" *ngFor="let star of getEstrellas(topLibros[2].valoracion)">â˜…</i>
                <i class="star empty text-theme me-1" *ngFor="let star of getEstrellasVacias(topLibros[2].valoracion)">â˜†</i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Lista de todos los libros valorados -->
  <section class="rated-books">
    <h2 class="section-title position-relative d-inline-block mb-4 pb-2 text-theme-text">Tus Calificaciones</h2>
    
    <div class="books-grid">
      <div class="book-item gradient-card rounded-3 shadow p-4 d-flex flex-column align-items-center transition-y" *ngFor="let libro of librosValorados">
        <div class="book-cover rounded-3 shadow overflow-hidden mb-4">
          <img [src]="libro.imagen" [alt]="libro.titulo" class="w-100 h-100 object-fit-cover img-hover">
        </div>
        <div class="book-info text-center w-100">
          <h3 class="fs-6 fw-semibold mb-1 text-theme-text">{{ libro.titulo }}</h3>
          <p class="author fs-7 text-theme mb-2">{{ libro.autor }}</p>
          <div class="rating d-flex align-items-center justify-content-center">
            <span class="rating-number fw-bold  me-2">{{ libro.valoracion }}</span>
            <div class="stars d-flex">
              <i class="star filled  me-1" *ngFor="let star of getEstrellas(libro.valoracion)">â˜…</i>
              <i class="star empty text-theme me-1" *ngFor="let star of getEstrellasVacias(libro.valoracion)">â˜†</i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Mensaje si no hay libros valorados -->
  <div class="no-books bg-component rounded-3 p-4 text-center shadow mt-4" *ngIf="librosValorados.length === 0">
    <p class="fs-5 mb-3 text-theme-text">AÃºn no has valorado ningÃºn libro.</p>
    <p class="mb-0 text-theme">Cuando termines de leer un libro, podrÃ¡s asignarle una valoraciÃ³n de 1 a 5 estrellas.</p>
  </div>
</div>